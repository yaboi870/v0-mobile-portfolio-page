<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Luke Alexander — Portfolio</title>
  <meta name="description" content="Portfolio of Luke Alexander — student, developer, and maker." />
  <link rel="stylesheet" href="portfolio.css" />
</head>
<body>

  <!-- ===== Header ===== -->
  <header class="header" role="banner">
    <div class="header-inner">
      <a href="https://luke-alexander.uk/" class="header-title" aria-label="Back to main site">
        luke-alexander.uk
      </a>
      <button
        class="settings-btn"
        id="settings-btn"
        type="button"
        aria-label="Open settings"
        onclick="openSettings('settings-window')"
      >&#9881;</button>
    </div>
  </header>

  <main>
    <!-- ===== Hero ===== -->
    <section class="hero" aria-label="Introduction">
      <div class="hero-profile">
        <div class="profile-photo-box">
          <img
            src="profile.jpg"
            alt="Photo of Luke Alexander"
            class="profile-photo"
            width="140"
            height="140"
          />
        </div>
        <div class="hero-text">
          <h1 class="hero-name">
            Luke <span class="hero-accent">Alexander</span>
          </h1>
          <p class="hero-description">
            17-year-old student at Down High School studying Computer Science, Physics, and Technology &amp; Design at A-level. I build home servers, create mathematical animations, make jam, and design games. This is a collection of my projects.
          </p>
        </div>
      </div>
    </section>

    <!-- ===== Contact Details ===== -->
    <section class="contact-section" aria-label="Contact details">
      <h2 class="section-heading">Contact</h2>
      <div class="contact-card">
        <p class="contact-item">
          <span class="contact-label">Email</span>
          <a href="mailto:lukeaustenalexander@gmail.com">lukeaustenalexander@gmail.com</a>
        </p>
        <p class="contact-item">
          <span class="contact-label">Phone</span>
          <span>07395197393</span>
        </p>
        <p class="contact-item">
          <span class="contact-label">Website</span>
          <a href="https://luke-alexander.uk/">luke-alexander.uk</a>
        </p>
      </div>
    </section>

    <!-- ===== Projects ===== -->
    <h2 class="section-heading">Projects</h2>

    <div class="tile-grid" id="project-grid" aria-label="Project list">
      <!-- Tiles are injected from projects.json -->
      <p class="loading">Loading projects...</p>
    </div>
  </main>

  <!-- ===== Settings Window (same style as project pages) ===== -->
  <div class="window" id="settings-window">
    <div class="window-header">
      <span>Settings</span>
      <div>
        <button class="close-btn" onclick="openSettings('settings-window')">X</button>
      </div>
    </div>
    <div class="window-content">
      <label class="settings-text" style="display: flex; align-items: center; gap: 0.5rem;">
        <input type="checkbox" id="theme-toggle" />
        Dark Mode
      </label>
      <label class="settings-text" style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem;">
        <input type="checkbox" id="borders-toggle" />
        Disable Window Borders
      </label>
      <div class="settings-row" style="margin-top: 0.75rem;">
        <label class="settings-text" for="fontSize-select">Font Size</label>
        <select id="fontSize-select" class="settings-select">
          <option value="default">Default</option>
          <option value="small">Small</option>
          <option value="large">Large</option>
          <option value="huge">Huge</option>
        </select>
      </div>
    </div>
  </div>

  <!-- ===== Footer ===== -->
  <footer class="footer" role="contentinfo">
    <p>Luke Alexander &mdash; <span id="footer-year"></span></p>
  </footer>

  <!-- ===== Script: load JSON + dark mode ===== -->
  <script>
    /* ---------- Settings panel ---------- */
    function openSettings(id) {
      var win = document.getElementById(id);
      var isVisible = win.style.display === 'block';
      win.style.display = isVisible ? 'none' : 'block';
    }

    /* Close settings on Escape */
    document.addEventListener('keydown', function (event) {
      if (event.key === 'Escape') {
        var win = document.getElementById('settings-window');
        if (win.style.display === 'block') {
          win.style.display = 'none';
        }
      }
    });

    (function () {
      /* ---------- Dark mode (checkbox) ---------- */
      var toggle = document.getElementById('theme-toggle');
      var storedTheme = localStorage.getItem('portfolio-theme');

      if (storedTheme === 'dark') {
        document.body.classList.add('dark-mode');
        toggle.checked = true;
      }

      toggle.addEventListener('change', function () {
        var isDark = this.checked;
        document.body.classList.toggle('dark-mode', isDark);
        localStorage.setItem('portfolio-theme', isDark ? 'dark' : 'light');
      });

      /* ---------- Disable window borders (checkbox) ---------- */
      var bordersToggle = document.getElementById('borders-toggle');
      var storedBorders = localStorage.getItem('portfolio-noBorders');

      if (storedBorders === 'true') {
        document.body.classList.add('no-borders');
        bordersToggle.checked = true;
      }

      bordersToggle.addEventListener('change', function () {
        var disabled = this.checked;
        document.body.classList.toggle('no-borders', disabled);
        localStorage.setItem('portfolio-noBorders', disabled ? 'true' : 'false');
      });

      /* ---------- Font size dropdown ---------- */
      var fontSelect = document.getElementById('fontSize-select');
      var storedFont = localStorage.getItem('portfolio-fontSize');

      if (storedFont) {
        fontSelect.value = storedFont;
        applyFontSize(storedFont);
      }

      fontSelect.addEventListener('change', function () {
        var value = this.value;
        applyFontSize(value);
        localStorage.setItem('portfolio-fontSize', value);
      });

      function applyFontSize(value) {
        var root = document.documentElement;
        if (value === 'small') root.style.fontSize = '13px';
        else if (value === 'large') root.style.fontSize = '18px';
        else if (value === 'huge') root.style.fontSize = '22px';
        else root.style.fontSize = '16px';
      }

      /* ---------- Footer year ---------- */
      document.getElementById('footer-year').textContent = new Date().getFullYear();

      /* ---------- Load projects from JSON ---------- */
      var grid = document.getElementById('project-grid');

      fetch('projects.json')
        .then(function (res) {
          if (!res.ok) throw new Error('Failed to load projects');
          return res.json();
        })
        .then(function (projects) {
          grid.innerHTML = '';

          projects.forEach(function (project) {
            var tile = document.createElement('a');
            tile.href = project.url;
            tile.className = 'tile';
            tile.setAttribute('role', 'article');
            tile.setAttribute('aria-label', project.title);
            tile.target = '_blank';
            tile.rel = 'noopener noreferrer';

            /* Tags HTML */
            var tagsHTML = '';
            if (project.tags && project.tags.length) {
              tagsHTML = '<div class="tile-tags">';
              project.tags.forEach(function (tag) {
                tagsHTML += '<span class="tile-tag">' + tag + '</span>';
              });
              tagsHTML += '</div>';
            }

            tile.innerHTML =
              '<div class="tile-header">' +
                '<span class="tile-icon" aria-hidden="true">' + project.icon + '</span>' +
                '<span class="tile-title">' + project.title + '</span>' +
              '</div>' +
              '<div class="tile-body">' +
                '<p class="tile-description">' + project.description + '</p>' +
                tagsHTML +
                '<span class="tile-link-hint">View project <span class="arrow" aria-hidden="true">&rarr;</span></span>' +
              '</div>';

            grid.appendChild(tile);
          });
        })
        .catch(function (err) {
          grid.innerHTML = '<p class="loading">Could not load projects. Please try again later.</p>';
          console.error(err);
        });
    })();
  </script>

</body>
</html>
